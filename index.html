<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>カタカナタイピング練習</title>
    <style>
        body { text-align: center; font-family: 'Segoe UI', sans-serif; padding-top: 50px; background-color: #f9f9f9; }
        .question-box { background: white; padding: 30px; border-radius: 15px; display: inline-block; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .target-char { font-size: 80px; color: #333; margin: 0; }
        input { font-size: 24px; padding: 10px; width: 200px; border: 2px solid #ddd; border-radius: 10px; outline: none; text-align: center; }
        input:focus { border-color: #ff69b4; }
        .result-message { height: 40px; margin-top: 20px; font-size: 24px; font-weight: bold; }
        .correct { color: #ff69b4; } /* あたり */
        .wrong { color: #ffa500; }   /* はずれ */
        .score-board { margin-top: 20px; font-size: 20px; color: #666; }
    </style>
</head>
<body>

    <div class="question-box">
        <p id="target-ja" class="target-char">準備完了？</p>
        <input type="text" id="type-input" placeholder="ローマ字を打ってね" autocomplete="off">
        
        <div id="result-text" class="result-message"></div>
        <div class="score-board">正解数: <span id="score-count">0</span></div>
    </div>

    <script>
        // あなたが修正したデータ
        const gameData = {
            foreign: [
                { label: "ふぁ", data: [[0,0,"ふぁ","fa"],[0,1,"ふぃ","fi"],[0,3,"ふぇ","fe"],[0,4,"ふぉ","fo"]] },
                { label: "てぃ", data: [[1,1,"てぃ","thi"]] },
                { label: "ちぇ", data: [[2,3,"ちぇ","che"]] },
                { label: "でぃ", data: [[3,1,"でぃ","dhi"],[3,2,"でゅ","dhu"]] },
                { label: "じぇ", data: [[5,3,"じぇ","je"],[6,3,"しぇ","she"]] },
                { label: "ゔぁ", data: [[8,0,"ゔぁ","va"],[8,1,"ゔぃ","vi"],[8,2,"ゔ","vu"],[8,3,"ゔぇ","ve"],[8,4,"ゔぉ","vo"]] },
                { label: "うぃ", data: [[9,1,"うぃ","wi"],[9,3,"うぇ","we"],[9,4,"うぉ","who"]] }
            ]
        };

        let score = 0;
        let currentQuestion = null;

        const inputField = document.getElementById('type-input');
        const targetField = document.getElementById('target-ja');
        const resultField = document.getElementById('result-text');
        const scoreField = document.getElementById('score-count');

        // 問題をランダムに出す
        function nextQuestion() {
            const categories = gameData.foreign;
            const randomCat = categories[Math.floor(Math.random() * categories.length)];
            const randomItem = randomCat.data[Math.floor(Math.random() * randomCat.data.length)];
            
            currentQuestion = { ja: randomItem[2], en: randomItem[3] };
            targetField.innerText = currentQuestion.ja;
            inputField.value = "";
        }

        // 入力をチェックする
        inputField.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                const userIn = inputField.value.toLowerCase().trim();
                
                if (userIn === currentQuestion.en) {
                    // 正解！
                    score++;
                    scoreField.innerText = score;
                    resultField.innerText = "Correct✨";
                    resultField.className = "result-message correct";
                    nextQuestion();
                } else {
                    // 間違い
                    resultField.innerText = "Check the chart⚠️";
                    resultField.className = "result-message wrong";
                    inputField.value = "";
                }
            }
        });

        // 最初に一問出す
        nextQuestion();
    </script>
</body>
</html>
